(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){},13:function(e,t,n){e.exports=n(21)},19:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var o=n(1),i=n.n(o),r=n(12),a=n.n(r),s=(n(19),n(2)),c=n(3),l=n(6),u=n(4),h=n(5),d=n(7),p=(n(20),n(8)),m=n(0),g=(n(10),n(11)),y=function(e){function t(){var e,n;Object(s.a)(this,t);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).start=function(){n.frameId||(n.frameId=requestAnimationFrame(n.animate))},n.update=function(e,t,o){if(void 0!==e){e-=128,t-=128,o-=128;var i=Math.PI,r=n.group.rotation.x,a=(r+2*i-r)/6e3,s=n.group.rotation.y,c=(s+2*i-s)/6e3,l=n.group.rotation.z,u=(l+2*i-l)/6e3,h=p.c(function(e){n.group.rotation.x+=a,n.group.rotation.y+=c,n.group.rotation.z+=u,e>6e3&&h.stop()});console.log(n.yline.geometry.vertices[0]);var d=(t-n.xline.geometry.vertices[0].y)/30,m=n.xline.geometry.vertices[0].y,g=function(e){return d*e+m},y=(o-n.xline.geometry.vertices[0].z)/30,b=n.xline.geometry.vertices[0].z,v=function(e){return y*e+b},f=(e-n.yline.geometry.vertices[0].x)/30,w=n.yline.geometry.vertices[0].x,x=function(e){return f*e+w},A=(o-n.yline.geometry.vertices[0].z)/30,M=n.yline.geometry.vertices[0].z,C=function(e){return A*e+M},S=(e-n.zline.geometry.vertices[0].x)/30,z=n.zline.geometry.vertices[0].x,k=function(e){return S*e+z},O=(t-n.zline.geometry.vertices[0].y)/30,j=n.zline.geometry.vertices[0].y,P=function(e){return O*e+j},B=0;console.log(n.xline);var F=p.a(function(e){B++,n.xline.geometry.vertices[0].y=g(B),n.xline.geometry.vertices[0].z=v(B),n.xline.geometry.vertices[1].y=g(B),n.xline.geometry.vertices[1].z=v(B),n.yline.geometry.vertices[0].x=x(B),n.yline.geometry.vertices[0].z=C(B),n.yline.geometry.vertices[1].x=x(B),n.yline.geometry.vertices[1].z=C(B),n.zline.geometry.vertices[0].x=k(B),n.zline.geometry.vertices[0].y=P(B),n.zline.geometry.vertices[1].x=k(B),n.zline.geometry.vertices[1].y=P(B),n.xline.geometry.verticesNeedUpdate=!0,n.yline.geometry.verticesNeedUpdate=!0,n.zline.geometry.verticesNeedUpdate=!0,e>400&&F.stop()},400/30)}},n.stop=function(){cancelAnimationFrame(n.frameId)},n.animate=function(){n.group.rotation.x+=.001,n.group.rotation.y+=.001,n.group.rotation.z+=.001,n.renderScene(),n.frameId=window.requestAnimationFrame(n.animate)},n.renderScene=function(){n.renderer.render(n.scene,n.camera)},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.mount.clientWidth,t=this.mount.clientHeight;this.scene=new m.Scene,this.camera=new m.PerspectiveCamera(19125,e/t,25.5,255e3),this.camera.position.z=1020,this.controls=new g(this.camera),this.controls.enablePan=!1,this.controls.maxZoom=1.5,this.controls.minZoom=.4,this.renderer=new m.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setClearColor(0,0),this.renderer.setSize(e,t),this.mount.appendChild(this.renderer.domElement);for(var n,o,i,r,a,s=new m.BoxGeometry(256,256,256),c=new m.MeshBasicMaterial({color:16777215,vertexColors:m.VertexColors}),l=["a","b","c","d","e","f"],u=0;u<s.faces.length;u++){i=(o=s.faces[u])instanceof m.Face3?3:4;for(var h=0;h<i;h++)r=o[l[h]],a=s.vertices[r],(n=new m.Color(16777215)).setRGB((a.x+128)/256,(a.y+128)/256,(a.z+128)/256),o.vertexColors[h]=n}var d=new m.Geometry;d.vertices.push(new m.Vector3(384,0,0),new m.Vector3(-384,0,0));var p=new m.LineBasicMaterial({color:16711680});this.xline=new m.Line(d,p);var y=new m.Geometry;y.vertices.push(new m.Vector3(0,384,0),new m.Vector3(0,-384,0));var b=new m.LineBasicMaterial({color:65280});this.yline=new m.Line(y,b);var v=new m.Geometry;v.vertices.push(new m.Vector3(0,0,384),new m.Vector3(0,0,-384));var f=new m.LineBasicMaterial({color:255});this.zline=new m.Line(v,f),this.cube=new m.Mesh(s,c),this.group=new m.Group,this.group.add(this.cube),this.group.add(this.xline),this.group.add(this.yline),this.group.add(this.zline),this.scene.add(this.group),this.start()}},{key:"componentWillUnmount",value:function(){this.stop(),this.mount.removeChild(this.renderer.domElement)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{style:{width:"700px",height:"700px"},ref:function(t){e.mount=t}})}}]),t}(o.Component),b=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},n.buttonVisibility=1,n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.submitAnswer=this.props.submitAnswer}},{key:"toggleMode",value:function(){1===this.buttonVisibility?(this.buttonVisibility=0,this.refs.toggle.style.color="white",this.submitAnswer=function(){}):(this.buttonVisibility=1,this.refs.toggle.style.color="black",this.submitAnswer=this.props.submitAnswer),this.refs.yes.style.visibility=this.buttonVisibility,this.refs.no.style.visibility=this.buttonVisibility,this.props.toggleMode()}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{width:"100%"},i.a.createElement("button",{ref:"yes",onClick:function(t){return e.submitAnswer(1)},disabled:this.buttonVisibility?"":"disabled",style:{x:"0%",borderRadius:"10px",backgroundColor:"rgba(0,0,0,0)",textAlign:"center",textDecoration:"none",fontSize:"16px",border:"2px solid #4CAF50",color:"black",padding:"15px 32px",display:"inline-block","-webkit-appearance":"none","-moz-appearance":"none",appearance:"none",opacity:this.buttonVisibility}},"Background IS Pastel"),i.a.createElement("button",{ref:"toggle",onClick:function(t){return e.toggleMode()},style:{x:"0%",backgroundColor:"rgba(0,0,0,0)",textAlign:"center",textDecoration:"none",fontSize:"16px",border:"none",color:"black",padding:"15px 32px",margin:"auto",display:"inline-block"}},"visible"===this.buttonVisibility?"View Results":"Map Colors"),i.a.createElement("button",{ref:"no",onClick:function(t){return e.submitAnswer(0)},disabled:this.buttonVisibility?"":"disabled",style:{borderRadius:"10px",backgroundColor:"rgba(0,0,0,0)",textAlign:"center",textDecoration:"none",fontSize:"16px",border:"2px solid #F44336",color:"black",padding:"15px 32px",display:"inline-block",opacity:this.buttonVisibility}},"Background NOT Pastel"))}}]),t}(o.Component);function v(e,t){var n={method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return console.log(e,t),fetch("/data",n).then(function(e){return e.json()}).then(function(e){return t(e)})}var f=n(11),w=function(e){function t(){var e,n;Object(s.a)(this,t);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).start=function(){n.frameId||(n.frameId=requestAnimationFrame(n.animate))},n.updatePoints=function(e){if(void 0!==e){n.points=e;for(var t=!1;n.MAX_POINTS<n.points.length;)n.MAX_POINTS*=2,t=!0;t&&n.createNewGeometry(),console.log(n.cloud),n.count=0,n.points.forEach(function(e){var t=[e.x,e.y,e.z],o=e.rating.reduce(function(e,t){return e+t},0)/e.ratings,i=[t[0]-128,t[1]-128,t[2]-128];console.log(n.cloud),n.cloud.geometry.attributes.alpha.array[n.count]=o,n.cloud.geometry.attributes.position.array[3*n.count+0]=i[0],n.cloud.geometry.attributes.position.array[3*n.count+1]=i[1],n.cloud.geometry.attributes.position.array[3*n.count+2]=i[2],n.cloud.geometry.attributes.color.array[3*n.count+0]=t[0]/256,n.cloud.geometry.attributes.color.array[3*n.count+1]=t[1]/256,n.cloud.geometry.attributes.color.array[3*n.count+2]=t[2]/256,n.count++}),n.cloud.geometry.setDrawRange(0,n.count),n.cloud.geometry.attributes.alpha.needsUpdate=!0,n.cloud.geometry.attributes.position.needsUpdate=!0,n.cloud.geometry.attributes.color.needsUpdate=!0}},n.stop=function(){cancelAnimationFrame(n.frameId)},n.animate=function(){n.group.rotation.x+=.001,n.group.rotation.y+=.001,n.group.rotation.z+=.001,n.renderScene(),n.frameId=window.requestAnimationFrame(n.animate)},n.renderScene=function(){n.renderer.render(n.scene,n.camera)},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.mount.clientWidth,n=this.mount.clientHeight;this.scene=new m.Scene,this.camera=new m.PerspectiveCamera(19125,t/n,25.5,255e3),this.camera.position.z=1020,this.controls=new f(this.camera),this.controls.enablePan=!1,this.controls.maxZoom=1.5,this.controls.minZoom=.4,this.renderer=new m.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setClearColor(0,0),this.renderer.setSize(t,n),this.mount.appendChild(this.renderer.domElement);var o=new m.BoxGeometry(256,256,256),i=new m.MeshPhongMaterial({}),r=new m.Mesh(o,i),a=new m.EdgesGeometry(r.geometry);console.log(a),a.addAttribute("color",new m.Float32BufferAttribute([1,1,1,1,0,1,1,1,1,1,1,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,0,0,0,0,0,1,0,0,1,1,0,0,0,0,0,1,0,1,1,0,0,1,1,1,0,0,1,0,1,1,1,0,1,1,1,0,1,0,0,1,1,0,0,0,0,0],3));var s=new m.LineBasicMaterial({vertexColors:m.VertexColors,linewidth:2}),c=new m.LineSegments(a,s);this.cube=c,this.points=[{x:0,y:0,z:0,ratings:3,rating:[0,0,0]}],this.MAX_POINTS=8,this.alphas=new Float32Array(1*this.MAX_POINTS),this.colors=new Float32Array(3*this.MAX_POINTS),this.positions=new Float32Array(3*this.MAX_POINTS);var l=new m.Color;this.count=0,o=new m.BufferGeometry,this.points.forEach(function(t){var n=[t.x,t.y,t.z],o=t.rating.reduce(function(e,t){return e+t},0)/t.ratings,i=[n[0]-128,n[1]-128,n[2]-128];e.alphas[e.count]=o,e.positions[3*e.count+0]=i[0],e.positions[3*e.count+1]=i[1],e.positions[3*e.count+2]=i[2],l.setRGB(n[0]/256,n[1]/256,n[1]/256),e.colors[3*e.count+0]=l.r,e.colors[3*e.count+1]=l.g,e.colors[3*e.count+2]=l.b,e.count++}),o.addAttribute("alpha",new m.Float32BufferAttribute(this.alphas,1)),o.addAttribute("position",new m.Float32BufferAttribute(this.positions,3)),o.addAttribute("color",new m.Float32BufferAttribute(this.colors,3)),this.shaderMaterial=new m.ShaderMaterial({vertexShader:"\n\t\t\tattribute float alpha;\n\t\t\tattribute vec3 color;\n\t\t\tvarying vec4 rgba;\n\t\t\tvoid main() {\n\t\t\t\t//vAlpha = alpha;\n\t\t\t\trgba = vec4(color, alpha);\n\t\t\t\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\tgl_PointSize = 8.0;\n\t\t\t\tgl_Position = projectionMatrix * mvPosition;\n\t\t\t}",fragmentShader:"\n\t\t\t//varying vec3 color;\n\t\t\t//varying float vAlpha;\n\t\t\tvarying vec4 rgba;\n\t\t\tvoid main() {\n\t\t\t\tgl_FragColor = vec4( rgba );\n\t\t\t}",transparent:!0}),this.cloud=new m.Points(o,this.shaderMaterial),this.cloud.name="pointcloud",this.group=new m.Group,this.group.add(this.cube),this.group.add(this.cloud),this.scene.add(this.group),this.start()}},{key:"componentWillUnmount",value:function(){this.stop(),this.mount.removeChild(this.renderer.domElement)}},{key:"createNewGeometry",value:function(){this.alphas=new Float32Array(1*this.MAX_POINTS),this.colors=new Float32Array(3*this.MAX_POINTS),this.positions=new Float32Array(3*this.MAX_POINTS);var e=new m.BufferGeometry;e.addAttribute("alpha",new m.Float32BufferAttribute(this.alphas,1)),e.addAttribute("position",new m.Float32BufferAttribute(this.positions,3)),e.addAttribute("color",new m.Float32BufferAttribute(this.colors,3)),this.scene.remove(this.scene.getObjectByName(this.cloud.name)),this.cloud=new m.Points(e,this.shaderMaterial),this.cloud.name="pointcloud",this.group.add(this.cloud)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{style:{width:"700px",height:"700px"},ref:function(t){e.mount=t}})}}]),t}(o.Component),x=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).getQuestion=function(e){void 0===n.point&&void 0===e||(console.log(n.point),void 0!==e&&(n.point=e),console.log(n.point),n.update())},n.changeColor=function(e){p.b("body").transition().style("background-color",e)},n.update=function(){var e=n.point.center;n.changeColor("rgb("+e.x+","+e.y+","+e.z+")"),n.ColorCube.current.update(e.x,e.y,e.z)},n.submitResult=function(e){console.log(Object(d.a)(Object(d.a)(n))),console.log(e);var t=n.point.center;v({x:t.x,y:t.y,z:t.z,result:e},n.getQuestion),console.log(n.SolutionSpace)},n.ColorCube=i.a.createRef(),n.QuestionArea=i.a.createRef(),n.SolutionSpace=i.a.createRef(),n.state={viewMode:"map"},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){v({},this.getQuestion)}},{key:"componentDidMount",value:function(){this.getQuestion()}},{key:"toggleViewMode",value:function(){if("map"===this.state.viewMode)this.setState({viewMode:"view"}),this.changeColor("rgb(0,0,0)");else{this.setState({viewMode:"map"});var e=this.point.center;this.changeColor("rgb("+e.x+","+e.y+","+e.z+")")}}},{key:"componentDidUpdate",value:function(){var e,t=this;null!==this.SolutionSpace.current&&(e=function(e){null!==t.SolutionSpace.current&&t.SolutionSpace.current.updatePoints(e)},fetch("/data",{method:"GET",cache:"no-cache",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){return e(t)}))}},{key:"render",value:function(){console.log(this.state);var e=this.state.viewMode;return console.log(this),i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},"map"===e?i.a.createElement(y,{ref:this.ColorCube}):null,"view"===e?i.a.createElement(w,{ref:this.SolutionSpace}):null,i.a.createElement(b,{ref:this.QuestionArea,toggleMode:this.toggleViewMode.bind(this),submitAnswer:this.submitResult.bind(this)})))}}]),t}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(i.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[13,1,2]]]);
//# sourceMappingURL=main.19365b49.chunk.js.map